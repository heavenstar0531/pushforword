{% extends 'ui/base.html' %}
{% load static %}
{% load utils %}
{% load bootstrap4 %}

{% bootstrap_messages %}


{% block head %}
<link rel="stylesheet" href="{% http2static 'css/jquery.datetimepicker.min.css' %}" type="text/css" crossorigin>
{{ form.media.css }}
{% endblock %}


{% block inner %}
  <div class="row main-content-row">


        {% for obj in object_list %}
          <div class="col-md-4">

              <div class="card card-smallcard-post card-post--1 m-3">
                <div style="line-height: 0">
                  <iframe src='https://maps.google.com/maps?q={{ obj.get_neighborhood_display|urlencode }}+new+york&t=&z=13&ie=UTF8&iwloc=&output=embed'
                          frameborder="0" width="100%" height="300px" scrolling="no"></iframe>



                  <!-- Button trigger modal -->
                  <button type="button" class="card-post__category badge badge-pill badge-dark"
                          data-toggle="modal" data-target="#deleteModal_{{ obj.id }}">
                    <font size="4em"><i class="material-icons">delete_outline</i></font>
                  </button>

                  <!-- Modal -->
                  <div class="modal fade" id="deleteModal_{{ obj.id }}" tabindex="-1" role="dialog"
                       aria-labelledby="deleteModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="deleteModalLabel">Warning!</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <p>Are you sure you want to delete this itinerary?</p>
                          <p>Neighborhood: <span class="font-weight-bold">{{ obj.get_neighborhood_display }}</span></p>
                          <p>Working days: {{ obj.start_day }} - {{ obj.end_day }}</p>
                          <p>Working hours: {{ obj.start_time }} - {{ obj.end_time }}</p>
                        </div>
                        <div class="modal-footer">
                          <form action="{% url 'schedule-delete' pk=obj.pk %}" method="post">
                            {% csrf_token %}
                            {% buttons %}
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                              <button type="submit" class="btn btn-danger">Delete</button>
                            {% endbuttons %}
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="card-body p-0 text-center"
                     style="{% if obj.is_active %}background-color: lightgreen{% endif %}">
                  <table class="table mb-0">
                    <tbody>
                    <tr>
                      <td><i class="material-icons">explore</i>
                        {{ obj.get_neighborhood_display }}
                      </td>
                    </tr>
                    <tr>
                      <td><i class="material-icons">watch_later</i>
                        {{ obj.start_day }} - {{ obj.end_day }}
                      </td>
                    </tr>
                    <tr>
                      <td><i class="material-icons">access_time</i>
                        {{ obj.start_time }} - {{ obj.end_time }}&nbsp;
                        ({{ obj.available_time }}hrs)
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>

          </div>
        {% endfor %}

        <div class="col-md-4">
          <div class="m-3">
            <div class="card m-auto">
              <div class="card-body p-3 text-center">
                <h5 class="card-title">Create itinerary</h5>
                <form autocomplete="off" action="#" method="post">
                  {% csrf_token %}
                  {% bootstrap_form form %}
                  {% buttons %}
                    <button type="submit" class="btn btn-primary">
                      Add
                    </button>
                  {% endbuttons %}
                </form>
              </div>
            </div>
          </div>
        </div>




  </div>
{% endblock %}


{% block tail %}
  <script src="{% static 'js/jquery.datetimepicker.full.min.js' %}" type="text/javascript" crossorigin></script>

  <script>
    $(function () {
      $("#id_start_time").datetimepicker({
        datepicker:false, format: 'H:i',
      });
      $("#id_end_time").datetimepicker({
        datepicker:false, format: 'H:i',
      });
    });
  </script>

  {{ form.media.js }}
{% endblock %}

{% extends 'mapwidgets/google-point-field-widget.html' %}
{% block javascript %}

  <script type="application/javascript">
      $(document).ready(() => {
          var mapOptions = JSON.parse("{{ options|escapejs }}");
          var field_value = JSON.parse("{{ field_value|escapejs }}");
          var wrapElemSelector = "#{{ name }}-mw-wrap";
          var mapElemID = "{{ name }}-map-elem";
          var googleAutoInputID = "{{ name }}-mw-google-address-input";
          var locationInputID = "#{{ id }}";
          var mapWidgetOptions = {
              locationInput: $(locationInputID),
              wrapElemSelector: wrapElemSelector,
              locationFieldValue: field_value,
              mapElement: document.getElementById(mapElemID),
              mapCenterLocationName: mapOptions.mapCenterLocationName,
              mapCenterLocation: mapOptions.mapCenterLocation,
              coordinatesOverlayToggleBtn: $(".mw-btn-coordinates", wrapElemSelector),
              coordinatesOverlayDoneBtn: $(".mw-btn-coordinates-done", wrapElemSelector),
              coordinatesOverlayInputs: $(".mw-overlay-input", wrapElemSelector),
              coordinatesOverlay: $(".mw-coordinates-overlay", wrapElemSelector),
              myLocationBtn: $(".mw-btn-my-location", wrapElemSelector),
              addressAutoCompleteInput: document.getElementById(googleAutoInputID),
              deleteBtn: $(".mw-btn-delete", wrapElemSelector),
              addMarkerBtn: $(".mw-btn-add-marker", wrapElemSelector),
              loaderOverlayElem: $(".mw-loader-overlay", wrapElemSelector),
              zoom: mapOptions.zoom,
              markerFitZoom: mapOptions.markerFitZoom,
              GooglePlaceAutocompleteOptions: mapOptions.GooglePlaceAutocompleteOptions,
              markerCreateTriggerNameSpace: "google_point_map_widget:marker_create",
              markerChangeTriggerNameSpace: "google_point_map_widget:marker_change",
              markerDeleteTriggerNameSpace: "google_point_map_widget:marker_delete",
              placeChangedTriggerNameSpace: "google_point_map_widget:place_changed"
          };
          var widget = new DjangoGooglePointFieldWidget(mapWidgetOptions);
          {% block extra_javascript %}
          {% endblock %}
      })

  </script>
{% endblock javascript %}